<html>

<head>
    <title>A-Frame Crawling Cursor Component - Basic</title>
    <script src="dist/bundle.js"></script>
</head>

<body>
<a-scene>
    <a-assets>
        <a-asset-item id="roomObj" src="assets/models/office.obj"></a-asset-item>
        <a-asset-item id="roomMtl" src="assets/models/office.mtl"></a-asset-item>
    </a-assets>
    <a-box position="-3 0.8 -3" rotation="0 180 0" material="color:red">
        <a-box position="0 1.6 0" rotation="0 30 0" material="color:blue" scale="1.2 1.2 1.2"></a-box>
    </a-box>
    <a-entity id="room" obj-model="obj: #roomObj; mtl:#roomMtl" position="0 -1 0"></a-entity>
    <a-camera raycaster crawling-cursor></a-camera>
    <a-cursor geometry="primitive: ring; radius-outer: 0.2; radius-inner: 0.06" material="color: lightblue" opacity="0.7"></a-cursor>
    <a-cursor geometry="primitive: ring; radius-outer: 0.2; radius-inner: 0.06" material="color: red" opacity="0.7"></a-cursor>
</a-scene>
<script>

    document.body.onkeyup = function(e) {
//    If spacebar is clicked
        if(e.keyCode==32) {
            var camera=document.querySelector("a-camera");
            onetime(camera,"gaze_fixed", function(e)
            {
                var gaze_coordinates=e.detail.gaze_coordinates;
                camera.setAttribute('position', { x: gaze_coordinates.x, y: gaze_coordinates.y, z: gaze_coordinates.z });
                console.log("Travel to cursor specified location");
            });
        }

        function onetime(node, type, callback) {
            // create event
            node.addEventListener(type, function(e) {
                // remove event
                e.target.removeEventListener(e.type, arguments.callee);
                // call handler
                return callback(e);
            });

        }

    };
</script>

</body>
</html>
